
## DefectDojo Model

DefectDojo is a security tool that automates application security vulnerability management. DefectDojo streamlines the application security testing process by offering features such as importing third party security findings, merging and de-duping, integration with Jira, templating, report generation, and security metrics.

## Install and run SAST tool 

```sh
docker run --rm -v $(pwd):/src hysnsec/brakeman -f json /src
docker run --rm -v $(pwd):/src hysnsec/brakeman -f json /src | tee brakeman-result.json
```

## Upload script for defectdojo

```sh
curl https://gitlab.practical-devsecops.training/-/snippets/28/raw -o upload-results.py
```

## Generate a defectdojo API key

```sh
export API_KEY=$(curl -s -XPOST -H 'content-type: application/json' https://dojo-oiahxczk.lab.practical-devsecops.training/api/v2/api-token-auth/ -d '{"username": "root", "password": "pdso-training"}' | jq -r '.token' )
```

## Uploading the results of brakeman scan to defect dojo with upload script

```sh
python3 upload-results.py --host dojo-oiahxczk.lab.practical-devsecops.training --api_key $API_KEY --engagement_id 2 --product_id 3 --lead_id 1 --environment "Production" --result_file brakeman-result.json --scanner "Brakeman Scan"
```

